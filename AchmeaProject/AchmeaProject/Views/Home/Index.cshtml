@model DashboardViewModel

<link rel="stylesheet" href="~/css/Overview.css" />

<h1>Hallo @Model.Developer.Firstname</h1>
<br />
<br />
<br />
<br />
<br />
<h1>Overzicht</h1>
<table>
    <thead>
        <tr class="table-header">
            <th>Titel</th>
            <th>Aanmaak datum</th>
        </tr>
    </thead>
    <tbody>
        @foreach (ProjectViewModel project in Model.Projects)
        {
            <tr class="table-item" onclick="window.location.href='@Url.Action("Details", "Overview", new { projectId = project.ProjectId})'">
                <td>@project.Title</td>
                <td>@project.CreationDate</td>
            </tr>
        }
    </tbody>
</table>
<table>
    <thead>
        <tr class="table-header">
            <th>Project</th>
            <th>Vereiste acties</th>
            <th>Geaccepteerd</th>
            <th>Uitgezonderd</th>
        </tr>
    </thead>
    <tbody>
        @foreach (ActionViewModel avm in Model.Actions)
        {
            <tr class="table-item">
                <td>@avm.Title</td>
                <td>@avm.OpenActions</td>
                <td>@avm.Accepted</td>
                <td>@avm.Excluded</td>
            </tr>
}
    </tbody>
</table>

<script src="~/lib/aspnet/signalr/dist/browser/signalr.js"></script>

<script>
    var connection = new signalR.HubConnectionBuilder().withUrl("/hubs/comment").build();


    connection.on("ReceiveProjectNotification", function (project) {
        //var msg = message.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
        //var encodedMsg = user + ": " + msg;
        //var ul = document.createElement("ul");
        //ul.textContent = encodedMsg;
        //document.getElementById(id + '+messageOutput').appendChild(ul);

        alert("heyyyy someone made a project called " + project + "!!")

    });

    connection.start().then(function () {
        document.getElementById("sendButton").disabled = false;
    }).catch(function (err) {
        return console.error(err.toString());
    });
</script>